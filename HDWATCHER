Creating an AI-Powered Home Depot Price Finder follows a similar structure as the Walmart Price Finder. Below is a comprehensive outline along with code implementations designed specifically for Home Depot. This application will utilize the Ollama AI for understanding product queries, searching Home Depot, verifying product matches, and analyzing deals.

### AI-Powered Home Depot Price Finder

---

## Project Structure

```
home_depot_price_finder/
├── .env
├── config.py
├── main.py
├── ai_engine.py
├── home_depot_scraper.py
├── product_verifier.py
├── deal_analyzer.py
├── price_history.py
├── result_formatter.py
├── requirements.txt
└── data/
    └── price_history.db
```

---

### 1. `requirements.txt`

```plaintext
requests>=2.31.0
beautifulsoup4>=4.12.0
lxml>=5.1.0
python-dotenv>=1.0.0
rich>=13.7.0
httpx>=0.27.0
fake-useragent>=1.5.0
Pillow>=10.0.0
playwright>=1.44.0
```

**Note:** After `pip install`, run `playwright install chromium` for dynamic page rendering.

---

### 2. `.env`

```env
# ============================================
# Ollama Configuration
# ============================================

OLLAMA_BASE_URL=http://localhost:11434

# Text model (7B or smaller):
OLLAMA_TEXT_MODEL=llama3.2:3b

# Vision model for image input:
OLLAMA_VISION_MODEL=llava:7b

# ============================================
# Home Depot Search Settings  
# ============================================

# Search method: scrape | api
# scrape = parse homedepot.com HTML (no key needed)
# api    = Home Depot API (if available), needs credentials
HOMEDDEPOT_SEARCH_METHOD=scrape

# Max pages to search
MAX_PAGES=3

# Max results to analyze per query
MAX_RESULTS=25

# Request delay (seconds)
REQUEST_DELAY=2.5

# Use Playwright browser for JS-rendered content
USE_BROWSER=true

# ============================================
# AI Verification
# ============================================

MIN_MATCH_CONFIDENCE=70
VERIFICATION_MODE=moderate

# ============================================
# Price History Tracking
# ============================================

ENABLE_PRICE_HISTORY=true
PRICE_DROP_ALERT_PCT=5.0
```

---

### 3. `config.py`

```python
import os
from pathlib import Path
from dotenv import load_dotenv

load_dotenv()

BASE_DIR = Path(__file__).resolve().parent

class Config:
    # Ollama
    OLLAMA_BASE_URL = os.getenv("OLLAMA_BASE_URL", "http://localhost:11434")
    OLLAMA_TEXT_MODEL = os.getenv("OLLAMA_TEXT_MODEL", "llama3.2:3b")
    OLLAMA_VISION_MODEL = os.getenv("OLLAMA_VISION_MODEL", "llava:7b")

    # Home Depot
    HOMEDDEPOT_SEARCH_METHOD = os.getenv("HOMEDDEPOT_SEARCH_METHOD", "scrape")

    # Scraping
    MAX_PAGES = int(os.getenv("MAX_PAGES", "3"))
    MAX_RESULTS = int(os.getenv("MAX_RESULTS", "25"))
    REQUEST_DELAY = float(os.getenv("REQUEST_DELAY", "2.5"))
    USE_BROWSER = os.getenv("USE_BROWSER", "true").lower() == "true"

    # Verification
    MIN_MATCH_CONFIDENCE = int(os.getenv("MIN_MATCH_CONFIDENCE", "70"))
    VERIFICATION_MODE = os.getenv("VERIFICATION_MODE", "moderate")

    # Price History
    ENABLE_PRICE_HISTORY = os.getenv("ENABLE_PRICE_HISTORY", "true").lower() == "true"
    PRICE_DROP_ALERT_PCT = float(os.getenv("PRICE_DROP_ALERT_PCT", "5.0"))

    # Paths
    DATA_DIR = BASE_DIR / "data"
    DB_PATH = DATA_DIR / "price_history.db"

    @classmethod
    def ensure_dirs(cls):
        cls.DATA_DIR.mkdir(exist_ok=True)
```

---

### 4. `ai_engine.py`

This file includes AI functionality similar to what was used for Walmart but would be customized for Home Depot.

```python
# Similar structure as before for AI engine functions which extract details from text or images.
# Use the same logic as the Walmart application for understanding and verification.
# [Implementation similar to the one in the Walmart section but tailored to Home Depot's product descriptions and categories.]
```

---

### 5. `home_depot_scraper.py`

This script will handle searching and scraping data from Home Depot's site.

```python
import requests
from bs4 import BeautifulSoup
import time
import random

from config import Config

class HomeDepotScraper:
    def __init__(self):
        self.max_pages = Config.MAX_PAGES
        self.max_results = Config.MAX_RESULTS
        self.delay = Config.REQUEST_DELAY
        self.ua = UserAgent()

    def search(self, query: str) -> list:
        all_products = []
        for page in range(1, self.max_pages + 1):
            url = f"https://www.homedepot.com/s/{query}?page={page}"
            html = self._fetch_page(url)

            products = self._parse_search_page(html)
            all_products.extend(products)
            if len(all_products) >= self.max_results:
                break
            
            time.sleep(self.delay + random.uniform(0.5, 2.5))

        return all_products[:self.max_results]

    def _fetch_page(self, url: str) -> str:
        headers = {
            "User-Agent": self.ua.random,
            "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8",
        }
        response = requests.get(url, headers=headers)
        response.raise_for_status()
        return response.text

    def _parse_search_page(self, html: str) -> list:
        soup = BeautifulSoup(html, "lxml")
        products = []
        # Add logic to parse product information from Home Depot's page structure.
        return products
```

---

### 6. `product_verifier.py`

This would contain functionality to verify that the products returned from Home Depot match the user's original request.

```python
# Similar to the Walmart implementation, but ensure that the verification logic takes into account Home Depot's product listings and specifics.

# Ensure that you carefully check for product ID uniqueness to prevent mismatches.
```

---

### 7. `deal_analyzer.py`

This would be used to identify and analyze deals from Home Depot.

```python
# Analyze the deal, checking for rollback features or exclusive discounts similar to how we did for Walmart.
```

---

### 8. `price_history.py`

Track prices for Home Depot products over time, allowing for alerts on significant price changes.

```python
# Structure similar to the Walmart Price History setup but ensure it's tailored to Home Depot's product specifics.
```

---

### 9. `result_formatter.py`

Format the output results for display, potentially using Rich for a beautified command line output.

```python
# Similar to the result_formatter for Walmart, format Home Depot data to provide a clear and useful summary to the user.
```

---

### 10. `main.py`

This is the main entry point of the application that handles user inputs, coordinates the workflow, and displays results.

```python
import argparse

def main():
    # Similar to the Walmart main structure: 
    # Handle user inputs, kick off the processing, show results
```

---

### Quick Start

1. Install Ollama and the relevant models.
2. Install Python dependencies.
3. Run the script with queries or images.

### CLI Options:

```
Usage:
  python main.py "Product Name" 
  python main.py --image "path/to/image.jpg"
```

The above structure outlines how to build an AI-Powered Home Depot Price Finder using a similar approach as the Walmart one. You can customize the scraping logic, AI verification, and presentation based on Home Depot's specific website structure and product attributes.
